{% comment %} KABALA&SNEAKER — Section Espace Admin {% endcomment %}
{% render 'role-gate', roles: 'admin', redirect_url: '/account/login' -%}
{%- endrender %}
<section class="ks-space ks-space-admin" style="max-width:1000px;margin:40px auto;padding:0 20px;">
  <header style="text-align:center;margin-bottom:24px;">
    <h1 style="margin:0 0 6px;">{{ section.settings.title | default: 'Espace Administrateur' }}</h1>
    <p style="margin:0;color:var(--ks-muted);">{{ section.settings.subtitle }}</p>
  </header>
  <div style="display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));">
    {% for block in section.blocks %}
      {% case block.type %}
        {% when 'quick_link' %}
          <a
            href="{{ block.settings.url }}"
            class="ks-card"
            style="display:block;padding:16px;border:1px solid var(--ks-muted-2);border-radius:14px;text-decoration:none;"
          >
            <h3 style="margin:0 0 6px;">{{ block.settings.label }}</h3>
            <p style="margin:0;color:var(--ks-muted);">{{ block.settings.desc }}</p>
          </a>
        {% when 'note' %}
          <div class="ks-card" style="padding:16px;border:1px solid var(--ks-muted-2);border-radius:14px;">
            <strong style="display:block;margin-bottom:6px;">{{ block.settings.heading }}</strong>
            <div>{{ block.settings.text }}</div>
          </div>
      {% endcase %}
    {% endfor %}
  </div>
</section>

{% schema %}
{
  "name": "Espace Admin",
  "settings": [
    { "type": "text", "id": "title", "label": "Titre", "default": "Espace Administrateur" },
    { "type": "text", "id": "subtitle", "label": "Sous-titre", "default": "Liens rapides et outils de gestion" }
  ],
  "blocks": [
    {
      "type": "quick_link",
      "name": "Lien rapide",
      "settings": [
        { "type": "text", "id": "label", "label": "Libellé", "default": "Admin Shopify" },
        { "type": "url", "id": "url", "label": "URL", "default": "/admin" },
        { "type": "text", "id": "desc", "label": "Description", "default": "Accéder au back-office" }
      ]
    },
    {
      "type": "note",
      "name": "Bloc texte",
      "settings": [
        { "type": "text", "id": "heading", "label": "Titre", "default": "Information" },
        { "type": "richtext", "id": "text", "label": "Texte", "default": "<p>Ajoutez ici des consignes internes.</p>" }
      ]
    }
  ],
  "max_blocks": 12,
  "presets": [{ "name": "Espace Admin" }]
}
{% endschema %}
